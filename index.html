<!DOCTYPE html>
<html lang="pt-br">

<head>
<meta charset="UTF-8">
<title>Umbrella Financeiro - Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        color: #00ff99;
        background: #00ff99;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow-x: hidden;
    }

    #particles-js {
        position: fixed;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #0a1a2f, #004d40, #00ff99);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
        z-index: -1;
    }

    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    .container {
        width: 100%;
        max-width: 500px;
        background: rgba(17, 43, 68, 0.95);
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(0, 255, 153, 0.2);
        padding: 40px;
        z-index: 1;
        margin: 20px auto;
        max-height: 80vh;
    }

    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid rgba(0, 255, 153, 0.2);
    }

    h2, h3 {
        color: #00ff99;
    }

    h2 {
        font-size: 1.8em;
        margin-bottom: 15px;
        font-weight: 600;
        text-align: center;
    }

    h3 {
        font-size: 1.4em;
        margin-bottom: 20px;
        font-weight: 500;
    }

    .welcome-text {
        margin-bottom: 15px;
        font-size: 0.9em;
    }

    label {
        display: block;
        margin-bottom: 10px;
        color: #00ff99;
        font-size: 0.95em;
        margin-top: 10px;
    }

    input, textarea {
        width: 98%;
        padding: 10px;
            padding-top: 10px;
            padding-right: 10px;
            padding-bottom: 10px;
            padding-left: 19px;
        background: rgba(15, 38, 61, 0.9);
        border: 1px solid rgba(0, 255, 153, 0.3);
        border-top-width: 1px;
            border-right-width: 1px;
            border-bottom-width: 1px;
            border-left-width: 1px;
            border-top-style: solid;
            border-right-style: solid;
            border-bottom-style: solid;
            border-left-style: solid;
            border-top-color: rgba(1, 222, 153, 0.3);
            border-right-color: rgba(1, 222, 153, 0.3);
            border-bottom-color: rgba(1, 222, 153, 0.3);
            border-left-color: rgba(1, 222, 153, 0.3);
            border-image-source: initial;
            border-image-slice: initial;
            border-image-width: initial;
            border-image-outset: initial;
            border-image-repeat: initial;
        border-radius: 111px;
        color: white;
        font-size: 1em;
        transition: border-color 0.3s ease;
    }

    input:focus, textarea:focus {
        border-color: #00ff99;
        outline: none;
        box-shadow: 0 0 0 2px rgba(0, 255, 153, 0.1);
    }
    
     /* CSS Botao do enviar para balaço================================================================================*/
    button[type="submit"] {
        background: #00ff99;
        color: #0a1a2f;
        padding: 12px 25px;
        border: none;
        border-radius: 20px;
        font-weight: 600;
        font-size: 1em;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 104%;
        margin-top: 25px;
    }
    /* CSS Botao do enviar para balaço================================================================================*/
    button[type="submit"]:hover {
        background: #00cc7a;
        transform: translateY(-2px);
    }

    nav {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 12px;
        margin-bottom: 25px;
    }

    nav button {
        background: rgba(0, 255, 153, 0.1);
        color: #00ff99;
        border: 1px solid #00ff99;
        padding: 12px;
        border-radius: 8px;
        font-size: 0.95em;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    nav button:hover {
        background: rgba(0, 255, 153, 0.2);
        transform: translateY(-2px);
    }

    /* CSS Botao do Ativo e Passivo======================================================================================*/
    .balance-buttons {
       background: #01d48000;
       transform: translateY(-2px);
}

     .balance-buttons button, .btnBalance {
       background: #00ff99;
       color: #0a1a2f;
       padding: 12px 25px;
       border: none;
       border-radius: 25px;
       font-weight: 600;
       font-size: 1em;
       cursor: pointer;
       transition: all 0.3s ease;
       width: 100%;
       margin-top: 10px;
      }
       /* CSS do Montar balanço ================================================================================================*/
  #set-up-swing {
        max-height: 400px; 
        overflow-y: auto;
        padding-right: 10px; 
}

    /* CSS do Negociação de boletos ======================================================================================*/
    .content-section {
        background: rgba(15, 38, 61, 0.8);
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 20px;
        max-height: 80vh;
        overflow-y: auto;
    }
  
    .form-section {
        background: rgba(15, 38, 61, 0.8);
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 20px;
        max-height: 80vh;
        overflow-y: auto;
    }

    #negotiations {
        display: flex;
        flex-direction: column;
        gap: 15px;
        overflow: auto;
        max-height: 40vh;
    }

    .form-group {
        margin-bottom: 15px;
        width: 95%;
    }

    #bills, #analyst {
        max-height: 50vh;
    }

    #evaluation-section {
        display: none;
        text-align: center;
        background: rgba(15, 38, 61, 0.8);
        padding: 25px;
        border-radius: 12px;
        margin-top: 20px;
    }

    .content-section::-webkit-scrollbar {
        width: 6px;
    }

    .content-section::-webkit-scrollbar-track {
        background: rgba(15, 38, 61, 0.5);
        border-radius: 3px;
    }

    .content-section::-webkit-scrollbar-thumb {
        background: rgba(0, 255, 153, 0.5);
        border-radius: 3px;
    }

    .content-section::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 255, 153, 0.7);
    }

    
    .form-section::-webkit-scrollbar {
        width: 6px;
    }

    .form-section::-webkit-scrollbar-track {
        background: rgba(15, 38, 61, 0.5);
        border-radius: 3px;
    }

    .form-section::-webkit-scrollbar-thumb {
        background: rgba(0, 255, 153, 0.5);
        border-radius: 3px;
    }

    .form-section::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 255, 153, 0.7);
    }

    .evaluation-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 20px 0;
    }

    .evaluation-buttons button {
        background: transparent;
        border: none;
        font-size: 2em;
        cursor: pointer;
        transition: transform 0.2s ease;
        padding: 10px;
    }

    .evaluation-buttons button:hover {
        transform: scale(1.2);
    }

    .satisfaction-bar {
        width: 100%;
        height: 20px;
        background: #ddd;
        margin-top: 20px;
        border-radius: 10px;
        overflow: hidden;
    }

    .satisfaction-bar span {
        display: block;
        height: 100%;
        transition: width 0.5s ease;
    }

    .satisfaction-bar span.low {
        background: #04e98a;
    }

    .satisfaction-bar span.medium {
        background: #f39c12;
    }

    .satisfaction-bar span.high {
        background: #2ecc71;
    }

    /* Responsive ===================================================================================================*/
    @media (max-width: 768px) {
        .container {
            max-width: 90%;
            padding: 20px;
        }

        nav {
            flex-direction: column;
            gap: 10px;
        }

        .evaluation-buttons {
            flex-wrap: wrap;
            gap: 10px;
        }

        .evaluation-buttons button {
            font-size: 24px;
        }
    }

    @media (max-width: 480px) {
        h2, h3 {
            font-size: 1.2em;
        }

        button {
            padding: 10px;
            font-size: 0.95em;
        }

        input, textarea {
            font-size: 0.95em;
        }

        .satisfaction-bar {
            height: 15px;
        }
    }

    .history-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .history-item {
        background: rgba(15, 38, 61, 0.9);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid rgba(0, 255, 153, 0.2);
    }

    .history-item h4 {
        color: #00ff99;
        margin-bottom: 10px;
        font-size: 1.1em;
    }

    .history-item p {
        margin: 5px 0;
        font-size: 0.9em;
        color: #f0f0f0;
    }

    .history-item .date {
        color: #00ff99;
        font-size: 0.8em;
        margin-top: 10px;
    }

    .status-pending {
        color: #ffd700;
    }

    .status-approved {
        color: #00ff99;
    }

    .status-rejected {
        color: #ff4444;
    }

    #history-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        padding: 10px;
    }

    .history-card {
        background: rgba(15, 38, 61, 0.9);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid rgba(0, 255, 153, 0.2);
    }

    .history-card p {
        margin: 8px 0;
        color: #f0f0f0;
    }

    .history-card strong {
        color: #00ff99;
    }

    /* Estilo do Modal======================================================================================================= */
    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .modal {
        background: rgba(17, 43, 68, 0.95);
        padding: 30px;
        border-radius: 15px;
        width: 90%;
        max-width: 400px;
        text-align: center;
        position: relative;
        border: 1px solid rgba(0, 255, 153, 0.2);
        box-shadow: 0 0 20px rgba(0, 255, 153, 0.1);
    }

    .modal h3 {
        color: #00ff99;
        margin-bottom: 20px;
    }

    .evaluation-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 25px 0;
    }

    .evaluation-buttons button {
        background: transparent;
        border: none;
        font-size: 2.5em;
        cursor: pointer;
        transition: transform 0.3s ease;
        padding: 10px;
    }

    .evaluation-buttons button:hover {
        transform: scale(1.2);
    }

    .close-modal {
        position: absolute;
        top: 10px;
        right: 10px;
        background: transparent;
        border: none;
        color: #00ff99;
        font-size: 1.5em;
        cursor: pointer;
        padding: 5px;
    }

    .close-modal:hover {
        color: #fff;
    }

    /* Estilo do Chat */
    #chat-section {
        display: flex;
        flex-direction: column;
        height: 40vh;
        position: relative;
        background: rgba(15, 38, 61, 0.4);
        border-radius: 12px;
        padding: 20px;
    }

    .chat-container {
        flex: 1;
        overflow-y: auto;
        margin-bottom: 70px;
        padding-right: 10px;
        scrollbar-width: thin;
        scrollbar-color: rgba(0, 255, 153, 0.3) rgba(15, 38, 61, 0.4);
    }

    .chat-container::-webkit-scrollbar {
        width: 6px;
    }

    .chat-container::-webkit-scrollbar-track {
        background: rgba(15, 38, 61, 0.4);
        border-radius: 3px;
    }

    .chat-container::-webkit-scrollbar-thumb {
        background: rgba(0, 255, 153, 0.3);
        border-radius: 3px;
    }

    .chat-container::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 255, 153, 0.5);
    }

    #messages-wrapper {
        display: flex;
        flex-direction: column;
        min-height: min-content;
    }

    .message {
        margin-bottom: 15px;
        max-width: 80%;
        padding: 12px 20px;
        border-radius: 20px;
        word-wrap: break-word;
    }

    .chat-input-container {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 15px 20px;
        background: rgba(15, 38, 61, 0.95);
        border-bottom-left-radius: 12px;
        border-bottom-right-radius: 12px;
        display: flex;
        gap: 15px;
        align-items: center;
        border-top: 1px solid rgba(0, 255, 153, 0.1);
    }

    .chat-input {
        flex: 1;
        padding: 12px 20px;
        border-radius: 25px;
        border: 1px solid rgba(0, 255, 153, 0.3);
        background: rgba(15, 38, 61, 0.4);
        color: white;
        font-size: 0.95em;
    }

    .chat-input:focus {
        outline: none;
        border-color: #00ff99;
        background: rgba(15, 38, 61, 0.6);
    }

    .user-message {
        background: rgba(0, 255, 153, 0.15);
        margin-left: auto;
        border-top-right-radius: 5px;
        color: #fff;
    }

    .bot-message {
        background: rgba(15, 38, 61, 0.9);
        margin-right: auto;
        border-top-left-radius: 5px;
        color: #00ff99;
    }

    .send-button {
        background: #00ff99;
        color: #0a1a2f;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2em;
    }

    .send-button:hover {
        transform: scale(1.1);
        background: #00cc7a;
    }

    .logout-btn {
      background: transparent;
      border: 1px solid rgba(255, 82, 82, 0.7);
      color: rgba(255, 82, 82, 0.9);
      padding: 8px 20px;
      border-radius: 20px;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logout-btn:hover {
      background: rgba(255, 82, 82, 0.1);
      border-color: #ff5252;
      color: #ff5252;
      transform: translateY(-2px);
    }

</style>
</head>

<body>

<div id="particles-js"></div>

<div class="container" id="login-page">
    <h2>Umbrella Financeiro - Login</h2>
    <p class="welcome-text">Bem-vindo ao Umbrella Financeiro! estamos aqui para ajudar nas suas negociações.</p>
    <form id="login-form">
        <label for="email">E-mail:</label>
        <input type="email" id="email" required>

        <label for="password">Senha:</label>
        <input type="password" id="password" required>

        <button type="submit">Entrar</button>
    </form>
</div>

  <div class="container" id="dashboard" style="display: none;">
    <header>
      <h2>Área da Umbrella</h2>
      <button onclick="logout()" class="logout-btn">Sair</button>
    </header>

    <nav>
      <button onclick="showSection('negotiations')">📑 Negociações</button>
      <button onclick="showSection('bills')">💸 Meus Boletos</button>
      <button onclick="showSection('negotiations-history')">📃 Histórico de negociações</button>
      <button onclick="showSection('analyst')">👨‍💻 Solicitar um Analista</button>
      <button onclick="showSection('chat-section')">💬 Chat de atendimento</button>
      <button onclick="showSection('set-up-swing')">⚖️ Montar balanço</button>
    </nav>
 
    <!-- Negociação de boletos -------------------------------------------------------------------------------------------------------->
    <section id="negotiations" class="content-section">
      <h3>Negociação de boletos</h3>
      <form id="negotiation-form">
        <div class="form-group">
          <label for="company-name">Razão Social:</label>
          <input type="text" id="company-name" required>
        </div>

        <div class="form-group">
          <label for="cnpj">CNPJ:</label>
          <input type="text" id="CNPJ" required>
        </div>

        <div class="form-group">
          <label for="amount">Valor total do boleto (R$):</label>
          <input type="number" id="amount" step="0.01" required>
        </div>

        <div class="form-group">
          <label for="installments">Parcelas em até 6x:</label>
          <input type="number" id="installments" required>
        </div>

        <div class="form-group">
          <label for="due-date">Data de Vencimento:</label>
          <input type="date" id="due-date" required>
        </div>

        <div class="form-group">
          <label for="observations">Observações complementares:</label>
          <textarea id="observations_group" rows="4"></textarea>
        </div>

        <button type="submit">Enviar para Negociação</button>
      </form>
    </section>
      
 <!-- Montar Balanço ----------------------------------------------------------------------------------------------------> 
 <section id="set-up-swing" class="content-section" style="display: none;">
  <h3>Montar balanço</h3>

  <div class="balance-buttons">
    <button class="btnBalance" onclick="showSection('ativo-section')">Ativo Circulante</button>
    <button class="btnBalance" onclick="showSection('passivo-section')">Passivo Circulante</button>
  </div>

 <!-- Ativo Circulante ---------------------------------------------------------------------------------------------->
 <div id="ativo-section" style="display: none;">
  <form class="form-section">
    <div class="form-group">
      <label for="caixa">Caixa bancos:</label>
      <input type="number" id="caixa" required>
    </div>

    <div class="form-group">
      <label for="receber">Contas a Receber:</label>
      <input type="number" id="receber" required>
    </div>

    <div class="form-group">
      <label for="duvidosos">(-) Devedores duvidosos</label>
      <input type="number" id="duvidosos" required>
    </div>

    <div class="form-group">
      <label for="materia">Estoque de matéria-prima</label>
      <input type="number" id="materia" required>
    </div>

    <div class="form-group">
      <label for="semiacabados">Estoque de produtos semi-acabados</label>
      <input type="text" id="semiacabados" required>
    </div>
    <button type="submit">Enviar para balanço</button>
  </form>
</div>
    
      <!-- Passivo Circulante ---------------------------------------------------------------------------------------------->
      <div id="passivo-section" style="display: none;">
        <form class="form-section">
          <div class="form-group">
            <label for="fornecedores">Contas a Pagar - Fornecedores:</label>
            <input type="number" id="fornecedores" required>
          </div>
    
          <div class="form-group">
            <label for="salarios">Salários e encargos a pagar:</label>
            <input type="number" id="salarios" required>
          </div>
    
          <div class="form-group">
            <label for="emprestimos">Empréstimos e financiamentos CP:</label>
            <input type="number" id="emprestimos" required>
          </div>
    
          <div class="form-group">
            <label for="observations">Observações complementares:</label>
            <input type="text" id="observations">
          </div>
    
        <button type="submit">Enviar para balanço</button>
      </form>
    </section>
 
    <section id="bills" class="content-section" style="display: none;">
      <h3>Meus Boletos</h3>
      <p>Você poderá visualizar seus boletos e status de pagamento em breve.</p>
      <ul>
        <li>Em processamento</li>
      </ul>
     
    </section>

    <section id="analyst" class="content-section" style="display: none;">
      <h3>Conversar com um Analista</h3>
      <p>Entre em contato com o analista da Umbrella Financeiro:</p>
      <ul>
        <li>📱 WhatsApp: (11) 91234-5678</li>
        <li>📧 E-mail: Suporte@umbrella.com</li>
      </ul>
      <a href="https://wa.me/5511912345678" target="_blank">Falar no WhatsApp</a>
    </section>

    <section id="negotiations-history" class="content-section" style="display: none;">
      <h3>Histórico de Negociações</h3>
      <div id="history-container"></div>
    </section>

    <section id="evaluation-section">
      <h3>Avaliar nosso atendimento</h3>
      <p>Como foi seu atendimento?</p>
      <div class="evaluation-buttons">
        <button onclick="rateService(1)">😞</button>
        <button onclick="rateService(2)">😕</button>
        <button onclick="rateService(3)">😐</button>
        <button onclick="rateService(4)">🙂</button>
        <button onclick="rateService(5)">😁</button>
      </div>
      <div class="satisfaction-bar">
        <span id="satisfaction-bar" class="low" style="width: 0%;"></span>
      </div>
    </section>

    <section id="chat-section" class="content-section" style="display: none;">
      <h3>Chat de Atendimento</h3>
      <div class="chat-container" id="chat-messages">
        <div id="messages-wrapper">
          <div class="message bot-message">
            Olá! Bem vidao(a) a Umbrella fianceiro, como posso ajudar você hoje?
          </div>
        </div>
      </div>
      <div class="chat-input-container">
        <input type="text" class="chat-input" id="chat-input" placeholder="Digite sua mensagem..." onkeypress="handleKeyPress(event)">
        <button class="send-button" onclick="sendMessage()">
          <span style="transform: rotate(0deg)">➤</span>
        </button>
      </div>
    </section>
  </div>

  <!-- Modal de Avaliação -->
  <div class="modal-overlay" id="evaluation-modal">
    <div class="modal">
      <button class="close-modal" onclick="closeEvaluationModal()">×</button>
      <h3>Avaliar nosso atendimento</h3>
      <p>Como foi seu atendimento?</p>
      <div class="evaluation-buttons">
        <button onclick="rateService(1)">😞</button>
        <button onclick="rateService(2)">😕</button>
        <button onclick="rateService(3)">😐</button>
        <button onclick="rateService(4)">🙂</button>
        <button onclick="rateService(5)">😁</button>
      </div>
      <div class="satisfaction-bar">
        <span id="satisfaction-bar" class="low" style="width: 0%;"></span>
      </div>
    </div>
  </div>

  
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS("particles-js",{
      particles: {
        number: {
          value: 50
        },
        color: {
          value: "#00ff99"
        },
        shape: {
          type: "circle"
        },
        opacity: {
          value: 0.5
        },
        size: {
          value: 3
        },
        line_linked: {
          enable: true,
          distance: 150,
          color: "#00ff99",
          opacity: 0.4,
          width: 1
        },
        move: {
          enable: true,
          speed: 1.5
        }
      },
      interactivity: {
        events: {
          onhover: {
            enable: true,
            mode: "grab"
          }
        }
      },
      retina_detect: true
    });

    const user = {
      email: "franqueado@umbrella.com.br",
      password: "12345678"
    }
    
    const loginForm = document.getElementById("login-form");
    const loginPage = document.getElementById("login-page");
    const dashboard = document.getElementById("dashboard");

    loginForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      if (email === user.email && password === user.password) {
        localStorage.setItem("loggedIn", "true");
        showDashboard();
      } else {
        alert("E-mail ou senha incorretos!");
      }
    });

    function showDashboard() {
      loginPage.style.display = "none";
      dashboard.style.display = "block";
    }

    function showSection(sectionId) {
      const sections = document.querySelectorAll('.content-section');
      sections.forEach(section => section.style.display = 'none');
      if(sectionId === "ativo-section" || sectionId === "passivo-section"){
        document.querySelector("#set-up-swing").style.display = "block"
        if(sectionId === "ativo-section") document.querySelector("#passivo-section").style.display = 'none'
        if(sectionId === "passivo-section") document.querySelector("#ativo-section").style.display = 'none'
      }
      document.getElementById(sectionId).style.display = 'block';


      const sectionToShow = document.getElementById(sectionId);
      if (sectionToShow) {
        sectionToShow.style.display = 'block';
      }
      sectionToShow.querySelector(".form-section").style.display = 'block'
      
      if (sectionId === 'negotiations-history') {
        updateHistoryDisplay();
      }
    }

    function showEvaluationModal() {
      document.getElementById('evaluation-modal').style.display = 'flex';
    }

    function closeEvaluationModal() {
      document.getElementById('evaluation-modal').style.display = 'none';
    }
// formulario ==========================================================================================================================
// function showSection(sectionId) {
//     // Esconde todas as seções de formulário
//     const sections = document.querySelectorAll('.content-section');
//     sections.forEach(section => {
//       section.style.display = 'none';
//     });

//     // Exibe a seção que foi clicada
//     const sectionToShow = document.getElementById(sectionId);
//     if (sectionToShow) {
//       sectionToShow.style.display = 'block';
//     }
//   }

  // Chama a função para exibir o primeiro formulário (opcional)
  window.onload = () => {
  }

    // Avalição ==========================================================================================================================
    function rateService(rating) {
      let satisfactionClass = '';
      let barWidth = rating * 20;

      if (rating <= 2) satisfactionClass = 'low';
      else if (rating <= 4) satisfactionClass = 'medium';
      else satisfactionClass = 'high';

      const bar = document.getElementById("satisfaction-bar");
      bar.style.width = barWidth + "%";
      bar.className = satisfactionClass;

      setTimeout(() => {
        alert("Obrigado pela sua avaliação!");
        closeEvaluationModal();
      }, 1000);
    }

    function logout() {
      localStorage.removeItem("loggedIn");
      loginPage.style.display = "block";
      dashboard.style.display = "none";
    }

    window.onload = () => {
      if (localStorage.getItem("loggedIn") === "true") {
        showDashboard();
      } else {
        loginPage.style.display = "block";
        dashboard.style.display = "none";
      }
    };

    document.getElementById("negotiation-form").addEventListener("submit", function (e) {
      e.preventDefault();
      
      const formData = {
        companyName: document.getElementById('company-name').value,
        cnpj: document.getElementById('CNPJ').value,
        amount: document.getElementById('amount').value,
        installments: document.getElementById('installments').value,
        dueDate: document.getElementById('due-date').value,
        observations: document.getElementById('observations').value
      };


      addNegotiation(formData);
      
      // Limpa o formulário
      this.reset();
      
      // Mostra o modal de avaliação
      showEvaluationModal();
    });

    // Função para formatar moeda
    function formatCurrency(value) {
      return new Intl.NumberFormat('pt-BR', {
        style: 'currency',
        currency: 'BRL'
      }).format(value);
    }

    // Função para formatar data
    function formatDate(date) {
      return new Date(date).toLocaleDateString('pt-BR');
    }

    // Função para formatar CNPJ
    function formatCNPJ(cnpj) {
      return cnpj.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/, "$1.$2.$3/$4-$5");
    }

    // Array para armazenar as negociações
    let negotiationsArray = [];

    // Função para adicionar negociação ao array
    function addNegotiation(data) {
      negotiationsArray.push({
        ...data,
        date: new Date().toLocaleDateString('pt-BR'),
        time: new Date().toLocaleTimeString('pt-BR')
      });
      updateHistoryDisplay();
    }

    // Função para atualizar a exibição do histórico
    function updateHistoryDisplay() {
      const historyContainer = document.getElementById('history-container');
      if (!historyContainer) return;

      historyContainer.innerHTML = '';

      if (negotiationsArray.length === 0) {
historyContainer.innerHTML = '<p style="color: #00ff99; text-align: center;">Nenhuma negociação registrada até o momento.<br>' +
                              'Por favor, realize os lançamentos após a abertura oficial.<br>' +
                              'Aguarde um período de até 8 horas para que os dados sejam processados e refletidos no sistema.</p>';
        return;
      }

      negotiationsArray.forEach((neg, index) => {
        const card = document.createElement('div');
        card.className = 'history-card';
        card.innerHTML = `
          <p><strong>Razão Social:</strong> ${neg.companyName}</p>
          <p><strong>CNPJ:</strong> ${neg.cnpj}</p>
          <p><strong>Valor:</strong> R$ ${neg.amount}</p>
          <p><strong>Parcelas:</strong> ${neg.installments}x</p>
          <p><strong>Vencimento:</strong> ${neg.dueDate}</p>
          <p><strong>Observações:</strong> ${neg.observations || 'Nenhuma'}</p>
          <p><strong>Data do cadastro:</strong> ${neg.date} às ${neg.time}</p>
        `;
        historyContainer.insertBefore(card, historyContainer.firstChild);
      });
    }


    // Respostas automáticas do bot
    const botResponses = [
  "Entendi! Como posso ajudar com isso?",
  "Beleza, vou dar uma olhada nisso pra você.",
  "Claro, tô verificando isso agora mesmo.",
  "Pode deixar! Já estou checando aqui.",
  "Boa pergunta! Me dá um segundo pra conferir.",
  "Opa, saquei. Como posso te orientar?",
  "Perfeito, deixa eu ver como posso resolver isso.",
  "Hmm, interessante... Vamos dar uma olhada juntos!",
  "Já entendi o ponto. Vamos resolver isso!",
  "Tudo certo por aqui. E por aí, como posso ajudar?"
];

    function getRandomResponse() {
      const index = Math.floor(Math.random() * botResponses.length);
      return botResponses[index];
    }

    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }
    
    function sendMessage() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      
      if (message) {
        const messagesWrapper = document.getElementById('messages-wrapper');
        
        // Adiciona mensagem do usuário
        const userDiv = document.createElement('div');
        userDiv.className = 'message user-message';
        userDiv.textContent = message;
        messagesWrapper.appendChild(userDiv);
        
        // Limpa input
        input.value = '';
        
        // Scroll para a última mensagem
        const chatContainer = document.getElementById('chat-messages');
        chatContainer.scrollTop = chatContainer.scrollHeight;
        
        // Simula resposta do bot após 1 segundo
        setTimeout(() => {
          const botDiv = document.createElement('div');
          botDiv.className = 'message bot-message';
          botDiv.textContent = getRandomResponse();
          messagesWrapper.appendChild(botDiv);
          chatContainer.scrollTop = chatContainer.scrollHeight;
        }, 1000);
      }
    }
    
  
</script>
 </body>

</html>